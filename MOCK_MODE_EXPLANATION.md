# Mock 모드 설명서

## 🔍 Mock 모드란?

**Mock 모드**는 실제 외부 API를 호출하지 않고, **미리 정의된 더미 데이터(가짜 응답)**를 반환하는 개발용 모드입니다.

## 📊 Mock 모드 vs 실제 모드 비교

### 1. STT (음성 → 텍스트 변환)

| 구분 | Mock 모드 | 실제 모드 |
|------|-----------|----------|
| API 호출 | ❌ 없음 | ✅ OpenAI Whisper API 호출 |
| 응답 | 항상 동일한 고정 문장 | 실제 음성 내용을 텍스트로 변환 |
| 예시 | "엄마, 오늘 날씨가 참 좋네요..." | 실제 말한 내용 그대로 |

**Mock 모드 코드:**
```typescript
// 무슨 말을 해도 항상 같은 응답
return "엄마, 오늘 날씨가 참 좋네요. 산책 다녀오셨어요?";
```

---

### 2. LLM (AI 대화 생성)

| 구분 | Mock 모드 | 실제 모드 |
|------|-----------|----------|
| API 호출 | ❌ 없음 | ✅ OpenAI GPT API 호출 |
| 응답 | 항상 동일한 고정 응답 | 사용자 입력에 따라 다른 응답 생성 |
| 예시 | "네, 날씨가 정말 좋아서..." | 상황에 맞는 다양한 대화 생성 |

**Mock 모드 코드:**
```typescript
// 무슨 말을 해도 항상 같은 응답
return "네, 날씨가 정말 좋아서 공원에 다녀왔어요. 우리 아들도 밥 잘 챙겨 먹고 있지?";
```

---

### 3. TTS (텍스트 → 음성 변환)

| 구분 | Mock 모드 | 실제 모드 |
|------|-----------|----------|
| API 호출 | ❌ 없음 | ✅ ElevenLabs API 호출 |
| 음성 생성 | ❌ 없음 | ✅ 등록된 목소리로 음성 생성 |
| 재생 | 시뮬레이션만 (음성 없음) | 실제 음성 파일 재생 |

**Mock 모드 코드:**
```typescript
// 빈 문자열 반환 (음성 없음)
return ""; // UI에서 "재생 중" 상태만 표시
```

---

### 4. 목소리 클론 (Voice Cloning)

| 구분 | Mock 모드 | 실제 모드 |
|------|-----------|----------|
| API 호출 | ❌ 없음 (에러 발생) | ✅ ElevenLabs API 호출 |
| 결과 | 목소리 모델 생성 실패 | 실제 목소리 클론 모델 생성 |

**Mock 모드:**
- API 키가 없으면 에러 발생
- 목소리 등록 불가능

---

## 🎯 Mock 모드의 장점

### ✅ 개발 단계에서 유용
1. **API 키 없이도 테스트 가능**
   - API 키 발급 전에도 UI/UX 테스트 가능
   - 개발 초기 단계에서 빠른 프로토타이핑

2. **비용 절감**
   - API 호출 비용 발생하지 않음
   - 무료로 반복 테스트 가능

3. **빠른 테스트**
   - 네트워크 요청 없이 즉시 응답
   - 지연 시간 없음

4. **안정적인 테스트**
   - 항상 같은 응답으로 UI 플로우 테스트 용이
   - 네트워크 오류나 API 장애와 무관

---

## ⚠️ Mock 모드의 한계

### ❌ 실제 기능 테스트 불가
1. **음성 인식 불가**
   - 실제로 말한 내용을 인식하지 못함
   - 항상 같은 고정 텍스트만 반환

2. **대화 생성 불가**
   - 실제 대화가 생성되지 않음
   - 항상 같은 응답만 표시

3. **음성 재생 불가**
   - 실제 음성이 생성되지 않음
   - 등록한 목소리로 재생 불가

4. **목소리 클론 불가**
   - 목소리 등록 기능 사용 불가
   - 실제 목소리 모델 생성 불가

---

## 🔄 Mock 모드 → 실제 모드 전환

### API 키 설정만 하면 자동 전환!

```bash
# .env.local 파일 생성
NEXT_PUBLIC_OPENAI_API_KEY=your_key_here
NEXT_PUBLIC_ELEVENLABS_API_KEY=your_key_here
```

코드는 자동으로 API 키 존재 여부를 확인하고:
- ✅ **API 키 있음** → 실제 API 호출 (실제 모드)
- ❌ **API 키 없음** → Mock 응답 반환 (Mock 모드)

---

## 🧪 Mock 모드 활용 시나리오

### 1. UI/UX 테스트
```
목적: 화면 전환, 버튼 동작 등 UI 요소 테스트
Mock 모드: 충분히 가능 ✅
```

### 2. 플로우 테스트
```
목적: 사용자 여정(온보딩 → 채팅 → 설정) 테스트
Mock 모드: 충분히 가능 ✅
```

### 3. 실제 기능 테스트
```
목적: 음성 인식, AI 대화, 음성 재생 테스트
Mock 모드: 불가능 ❌ → API 키 필요
```

### 4. 목소리 클론 테스트
```
목적: 실제 목소리 등록 및 재생 테스트
Mock 모드: 불가능 ❌ → API 키 필요
```

---

## 📝 요약

| 항목 | 설명 |
|------|------|
| **정의** | 실제 API 없이 더미 응답 반환하는 모드 |
| **활성화 조건** | API 키가 없을 때 자동 활성화 |
| **장점** | API 키 없이도 UI/플로우 테스트 가능, 비용 없음 |
| **한계** | 실제 기능(음성 인식, AI 대화, 음성 재생) 불가 |
| **활용** | 개발 초기 단계, UI 테스트, 데모용 |

**결론**: Mock 모드는 UI와 플로우를 빠르게 테스트할 때 유용하지만, 실제 기능을 테스트하려면 반드시 API 키가 필요합니다! 🎯

